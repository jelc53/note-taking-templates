%------------------------------------------------------------
% Lecture macros & preamble (invariant across lectures)
% Include this file in your main .tex via: \input{lecture_macros.tex}
%------------------------------------------------------------

% --- Encoding & fonts (works with pdfLaTeX)
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}

% --- Page layout & typography
\usepackage[margin=1in]{geometry}
\usepackage{microtype}
\usepackage{setspace}
\setstretch{1.15}
\usepackage{lastpage}

% --- Math & symbols
\usepackage{amsmath,amssymb,amsthm,mathtools}
\numberwithin{equation}{section}

% --- Lists
\usepackage{enumitem}
\setlist{itemsep=2pt, topsep=4pt}

% --- Colors, hyperlinks
\usepackage{xcolor}
\usepackage{hyperref}
\hypersetup{colorlinks=true, linkcolor=blue!60!black, urlcolor=blue!60!black, citecolor=blue!60!black}

% --- Headers & footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

% --- Friendly boxes
\usepackage[most]{tcolorbox}
\tcbset{enhanced, colback=gray!4, colframe=black!20, boxrule=0.5pt, sharp corners}
\newtcolorbox{keyidea}{title=Key Idea, colback=blue!2}
\newtcolorbox{summarybox}{title=Summary}
\newtcolorbox{exercisebox}{title=Try it}

% --- Theorem-like environments
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

% === Metadata defaults (can be overridden by \lecture) ===
\newcommand{\coursename}{Course Name}
\newcommand{\term}{Term}
\newcommand{\instructor}{Instructor}
\newcommand{\lectureNum}{0}
\newcommand{\lectureTitle}{Untitled}
\newcommand{\lectureDate}{\\today}

% --- Helper to refresh header/footer after metadata changes
\newcommand{\setupHeader}{%
  \fancyhead[L]{\large Lecture~\#\lectureNum}
  \fancyhead[C]{\large \coursename}
  \fancyhead[R]{\large \lectureDate}
  \fancyfoot[C]{\thepage\ of \pageref{LastPage}}}

% --- Macro to render the lecture heading
% Usage: \lecture{<num>}{<title>}{<date>}{<course>}{<instructor>}{<term>}
\newcommand{\lecture}[5]{%
  \def\lectureNum{#1}%
  \def\lectureTitle{#2}%
  \def\lectureDate{#3}%
  \def\coursename{#4}%
  \def\instructor{#5}%
  \setupHeader
  \thispagestyle{fancy}
  \begin{center}
    {\Large\bfseries \lectureTitle}\\[2pt]
    {\large Instructor: \instructor}\\[6pt]
    % {\large Instructor: \instructor} \hfill {\large \lectureDate}\\[4pt]
  \end{center}
  \vspace{0.4em}\hrule\vspace{0.8em}
}

% --- Handy math shortcuts
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\dd}{\,\mathrm{d}}

